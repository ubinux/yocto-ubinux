From 869a557e44d0acd98b2c16de564cef0df429c3bc Mon Sep 17 00:00:00 2001
From: Lei Maohui <leimaohui@cn.fujitsu.com>
Date: Wed, 12 May 2021 14:44:15 +0900
Subject: [PATCH] Fix error on aarch64 with binutils 2.35.1.

This patch has not been merged by upstream.https://github.com/namhyung/uftrace/pull/1248

Signed-off-by: Lei Maohui <leimaohui@cn.fujitsu.com>
---
 utils/symbol.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/utils/symbol.c b/utils/symbol.c
index 62284f78..3d28df09 100644
--- a/utils/symbol.c
+++ b/utils/symbol.c
@@ -560,6 +560,7 @@ int load_elf_dynsymtab(struct symtab *dsymtab, struct uftrace_elf_data *elf,
 	}
 	else if (elf->ehdr.e_machine == EM_AARCH64) {
 		plt_addr += 16;    /* AARCH64 PLT0 size is 32 */
+		plt_entsize = 16;
 	}
 	else if (elf->ehdr.e_machine == EM_386) {
 		plt_entsize += 12;
-- 
2.25.1

